<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Modo Carrera</title>
  <style>
    .grl-rojo { background-color: #ff4d4d; color: white; }
    .grl-amarillo { background-color: #fff066; color: black; }
    .grl-naranja { background-color: #ffb84d; color: black; }
    .grl-verde-claro { background-color: #99ff99; color: black; }
    .grl-verde-oscuro { background-color: #33cc33; color: white; }
  </style>
</head>
<body>
  <h1>Modo Carrera - {{ session['user'] }}</h1>
  <a href="{{ url_for('logout') }}">Cerrar sesión</a>

  <h2>Añadir jugador</h2>
  <form action="{{ url_for('add_player') }}" method="POST">
    <select name="posicion" required>
      <option value="">Posición</option>
      {% for p in ['POR','LI','CAI','DFC','LD','CAD','MCD','MC','MCO','MI','MD','EI','DC','SD','ED'] %}
      <option value="{{p}}">{{p}}</option>
      {% endfor %}
    </select>
    <input type="text" name="nombre" placeholder="Nombre" required>
    <input type="number" name="edad" placeholder="Edad" required>
    <input type="text" name="nacionalidad" placeholder="Nacionalidad" required>
    <input type="number" name="grl" placeholder="GRL (1-99)" min="1" max="99" required>
    <button type="submit">Añadir</button>
  </form>

  <h2>Plantilla</h2>
  <table border="1">
    <tr>
      <th>Posición</th><th>Nombre</th><th>Edad</th><th>Nacionalidad</th><th>GRL</th>
      <th>Partidos</th><th>Goles</th><th>Asistencias</th><th>Valor Mercado</th><th>Sueldo</th><th>Acción</th>
    </tr>
    {% for j in jugadores %}
    <tr>
      <td>{{ j[1] }}</td>
      <td>{{ j[2] }}</td>
      <td>{{ j[3] }}</td>
      <td>{{ j[4] }}</td>
      {% set clase = 'grl-rojo' if j[5]<50 else 'grl-amarillo' if j[5]<70 else 'grl-naranja' if j[5]<80 else 'grl-verde-claro' if j[5]<85 else 'grl-verde-oscuro' %}
      <td class="{{ clase }}">{{ j[5] }}</td>
      <td>{{ j[6] }}</td>
      <td>{{ j[7] }}</td>
      <td>{{ j[8] }}</td>
      <td>{{ j[9] }}</td>
      <td>{{ j[10] }}</td>
      <td><a href="{{ url_for('delete_player', id=j[0]) }}">Eliminar</a></td>
    </tr>
    {% endfor %}
  </table>
</body>
</html>
